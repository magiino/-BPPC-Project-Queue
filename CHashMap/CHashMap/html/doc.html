<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BPPC 2017: CHashMap Example project: Dokumentace projektu CHashMap</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="project_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BPPC 2017: CHashMap Example project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Dokumentace projektu <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Teoretický popis: Termín datový kontejner a datová struktura HashMap</h2>
<p>Termín kontejner představuje v oblasti návrhu datových struktur a algoritmů takový datový typ, který umožňuje za běhu programu sdružovat více prvků (stejného nebo i různého typu) do jedné složené datové struktury. Výhody spojené s používáním kontejneru lze najít například v jednoduchém předání všech prvků takového kontejneru do funkce pomocí jediného parametru (typu kontejner), nebo pro předání více hodnot z funkce, kde návratovou hodnotou je opět jediná hodnota (typu kontejner). Hlavní výhodou je ovšem možnost provedení operace nad všemi prvky kontejneru pomocí zápisu jediného volání služby, kterou zajistí přímo daný kontejner v rámci svého API. Mezi takové služby může patřit dealokace paměti všech prvků v kontejneru, vytisknutí všech prvků v kontejneru a další operace spojené se správou prvků v kontejneru.</p>
<p>Datový kontejner bude ve Vašem projektu realizován pomocí datové sktruktury <a href="https://en.wikipedia.org/wiki/Hash_table">Hash table</a> (neuspořádané pole prvků (tj. seznam prvků s klíčem/indexem a hodnotou). Tato datová struktura vychází svými základy z <a href="https://en.wikipedia.org/wiki/Linked_list">lineárního jednosměrně vázaného seznamu</a>, ale rozšiřuje jej o možnost časově efektivního průchodu seznamem při hledání konkrétního prvku. Modifikací datové struktury hašovací tabulky je HashMapa resp. <a href="https://en.wikipedia.org/wiki/Multimap">HashMultiMapa</a> umožňujicí vícenásobné vložení prvků se stejným klíčem případně i se stejným klíčem a hodnotou.</p>
<p>HashMapa se tedy skládá z pole jednosměrně vázaných seznamů (v projektu proměnná <a class="el" href="class_c_hash_map.html#a1018fdaad71e8207e747db26e88025d6">iBucketTable</a>). Základním prvkem jednosměrně vázaného seznamu je struktura <a class="el" href="struct_c_hash_map_1_1_t_item.html">TItem</a>, která obsahuje ukazatel na další prvek v seznamu a datový člen. Datovým členem je třída <a class="el" href="class_c_pair.html" title="CPair class (key and value) ">CPair</a>, která obsahuje klíč a vlastní hodnotu. Vlastní hodnota je reprezentována prvkem třídy <a class="el" href="class_c_value__bool_1_1_c_value.html">CValue</a>.</p>
<p>Pro činnost HashMap je důležitá HashFunction (tzv. hašovací funkce), ve třídě <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> je to metoda <a class="el" href="class_c_hash_map.html#ad7230ba064063608b7e49495d3660426">CalculateHash()</a>), která na základě hodnoty klíče určí index lineárního seznamu v poli <a class="el" href="class_c_hash_map.html#a1018fdaad71e8207e747db26e88025d6">iBucketTable</a>, do kterého daný pár klíč/hodnota patří.</p>
<p>Počet prvků tabulky <a class="el" href="class_c_hash_map.html#a8745c6aa08e235500828dea0ad30b548">iBucketTableSize</a> se vhodně zvolí na základě dané úlohy. Tomuto počtu musí odpovídat výsledky hašovací funkce, která by měla rozdělovat prvky do tabulky statisticky rovnoměrně a to pro celý předpokládaný rozsah hodnot klíčů.</p>
<p>Hašovací tabulka je reprezentovaná polem prvků typu <a class="el" href="struct_c_hash_map_1_1_t_bucket.html">TBucket</a>, který pro manipulaci se seznamy obsahuje ukazatele na první <a class="el" href="struct_c_hash_map_1_1_t_bucket.html#a03a10c5ce912fd09137778c3454e7d77">iHead</a> a poslední <a class="el" href="struct_c_hash_map_1_1_t_bucket.html#a1b8b634924907ed251a58eee989d577a">iTail</a> položku lineárního seznamu. Pokud pro danou položku (hash kód) nebyl vložen žádný prvek, odkazují oba ukazatele na hodnotu <code>nullptr</code>.</p>
<p>Využití principu hašování má tu výhodu, že pro hodnoty klíčů, které mohou nabývat širokého rozsahu a mít nerovnoměrný výskyt, provede hašovací funkce přepočet klíče na index (<code>idx</code>) o daleko menším rozsáhu (vznikne tzv. otisk či miniatura hodnoty původního klíče).</p>
<p>Vytvoření hašovací tabulky (tj. tabulky miniatur) obsahující počátky jednotlivých lineárně vázaných seznamů je dosaženo "relativně" paměťově úsporného kontejneru, ale také výpočetně efektivního přístupu k nalezení položky s daným klíčem (ve srovnání s jediným lineárním seznamem všech prvků).</p>
<p><div class="dotgraph">
<img src="dot_CPair.png" alt="dot_CPair.png" border="0" usemap="#dot_CPair.map"/>
<map name="dot_CPair.map" id="dot_CPair.map"><area shape="rect" id="node1" href="class_c_pair.html" title="Pair with key and value" alt="" coords="5,5,160,68"/>
</map>
<div class="caption">
Obr. 1 - Instance třídy <code>CPair</code> představující pár s datovými složkami klíč a hodnota</div>
</div>
<br />
 <div class="dotgraph">
<img src="dot_CHashMapPrimitive.png" alt="dot_CHashMapPrimitive.png" border="0" usemap="#dot_CHashMapPrimitive.map"/>
<map name="dot_CHashMapPrimitive.map" id="dot_CHashMapPrimitive.map"><area shape="rect" id="node1" href="struct_c_hash_map_1_1_t_bucket.html" title="Bucket associated with linked list" alt="" coords="5,39,104,132"/>
<area shape="rect" id="node2" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="152,27,251,120"/>
<area shape="rect" id="node4" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="445,27,544,120"/>
<area shape="rect" id="node3" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="299,27,397,120"/>
<area shape="rect" id="node5" href="http://shoresofnull.com/" title="nullptr" alt="" coords="592,72,691,120"/>
</map>
<div class="caption">
Obr. 2 - Příklad elementárního seznamu uloženého ve struktuře <code>TBucket</code> se třemi prvky <code>TItem</code> </div>
</div>
<br />
 <div class="dotgraph">
<img src="dot_CHashMap.png" alt="dot_CHashMap.png" border="0" usemap="#dot_CHashMap.map"/>
<map name="dot_CHashMap.map" id="dot_CHashMap.map"><area shape="rect" id="node1" title="input key" alt="" coords="5,276,77,324"/>
<area shape="poly" id="node2" href="class_c_hash_map.html#ad7230ba064063608b7e49495d3660426" title="Calculate index to Bucket Table" alt="" coords="399,300,392,293,373,286,343,281,305,277,263,276,221,277,183,281,153,286,133,293,127,300,133,307,153,314,183,319,221,323,263,324,305,323,343,319,373,314,392,307"/>
<area shape="rect" id="node3" href="class_c_hash_map.html#a1018fdaad71e8207e747db26e88025d6" title="Bucket array where each indexes associated with owned linked list" alt="" coords="480,145,635,423"/>
<area shape="rect" id="node4" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="684,27,805,120"/>
<area shape="rect" id="node6" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="684,152,805,245"/>
<area shape="rect" id="node8" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="1036,152,1157,245"/>
<area shape="rect" id="node10" href="https://www.youtube.com/watch?v=SqJ8amSQPUg" title="nullptr" alt="" coords="695,320,794,368"/>
<area shape="rect" id="node11" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="684,400,805,493"/>
<area shape="rect" id="node12" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="855,400,987,493"/>
<area shape="rect" id="node5" href="https://www.youtube.com/watch?v=7De-UU9qB9Q" title="nullptr" alt="" coords="871,72,970,120"/>
<area shape="rect" id="node7" href="struct_c_hash_map_1_1_t_item.html" title="One item of single linked list of TItems" alt="" coords="860,152,981,245"/>
<area shape="rect" id="node9" href="https://www.youtube.com/watch?v=mMgVqQ1TGeU&amp;feature=youtu.be&amp;t=25" title="nullptr" alt="" coords="1207,197,1305,245"/>
<area shape="rect" id="node13" href="https://www.youtube.com/watch?v=8Ku61ArIVAo" title="nullptr" alt="" coords="1047,445,1146,493"/>
</map>
<div class="caption">
Obr. 3 - Princip uložení šesti prvků <code>CPair</code> {0,'A'}, {1,'B'}, {1,'C'}, {3,'D'}, {5,'E'}, {11,'F'} v multimapě <code>CHashmap</code> </div>
</div>
<br />
</p>
<p><br />
</p>
<h2>Popis implementace</h2>
<p>V tomto školním C++ projektu je HashMapa realizována za pomocí pole lineárních seznamů. Pro svou činnost definuje a využívá další pomocné datové typy. Pro pole lineárních seznamů používá datový typ <a class="el" href="struct_c_hash_map_1_1_t_bucket.html">TBucket</a>, který obsahuje ukazatele na první a poslední prvek lineárního seznamu. Lineární seznam je tvořen za pomoci prvků datového typu <a class="el" href="struct_c_hash_map_1_1_t_item.html">TItem</a>, který obsahuje datový prvek a ukazatel na další položku v lineárním seznamu. Datový prvek je realizován pomocí typu <a class="el" href="class_c_pair.html" title="CPair class (key and value) ">CPair</a>, který obsahuje dvojici klíč a vlastní hodnotu. Hodnota je realizována jedním z připravených typů <a class="el" href="class_c_value__bool_1_1_c_value.html">CValue</a>.</p>
<p>Pro práci s prvky HashMap seznamu je vytvořen iterátor (<a class="el" href="class_c_hash_map_1_1_c_forward_iterator.html">CForwardIterator</a>), který realizuje dopředné procházení seznamu. Dále jsou pro práci s prvky HashMap předdefinovány konstanty, které umožňují řešit různý přístup k duplicitním prvkům při hledání (<a class="el" href="class_c_hash_map.html#a9c8b9ae56d510ae0ff5e9ba74ee9930d" title="TAt enumerator definition. ">CHashMap::TAt</a>), a nebo určit implicitní způsob řazení prvků (<a class="el" href="class_c_hash_map.html#ad4dd353df970a4464c449ef9f3b6a172" title="TInsert enumerator definition. ">CHashMap::TInsert</a>).</p>
<p><b>Celý projekt kontejneru budete realizovat bez podpory standardních kontejnerových typů knihovny STL nebo jiných knihoven třetích stran!</b></p>
<h3>Třída <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a></h3>
<p>Třída <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> je základní třídou, která realizuje mechanizmus uchování prvků a určuje způsob jakým se s nimi pracuje. Princip uložení prvků je mechanizmus HashMap, kdy na základě klíče datové položky je určena pozice dvojice klíč/hodnota v HashMap. Za pomoci hašovací funkce <a class="el" href="class_c_hash_map.html#ad7230ba064063608b7e49495d3660426" title="Hash value calculator. ">CHashMap::CalculateHash</a> je pomocí klíče v tabulce určen lineární seznam, do kterého daná položka (vkládaná, vybíraná, hledaná ...) patří. Základním prvkem třídy <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> je pole struktur <a class="el" href="struct_c_hash_map_1_1_t_bucket.html">TBucket</a>, které odkazuje na jednotlivé lineární seznamy obsahující datové prvky. Tato třída realizuje kompletní funkčnost pro manipulaci s prvky (včetně práce s prvky lineárního seznamu).</p>
<p>Pro určení způsobu řazení prvků, které v seznamu existují vícenásobně (tj. ošetření dvojic se stejnými hodnotami klíč nebo i hodnota) jsou vytvořeny konstanty pomocí výčtového typu <a class="el" href="class_c_hash_map.html#ad4dd353df970a4464c449ef9f3b6a172">TInsert</a>. Promyslete si využití těchto hodnot pro realizaci Vašeho kontejneru. Je možné určit, že se duplicita nezařadí, nebo že se zařadí před či za prvky se stejnými hodnotami.</p>
<h3>Třída <a class="el" href="class_c_hash_map_1_1_c_forward_iterator.html" title="CForwardIterator class definition. ">CHashMap::CForwardIterator</a></h3>
<p>Pro manipulaci s prvky kontejnerů jsou často používány iterátory. Iterátor slouží k postupnému procházení kontejneru po jednotlivých prvcích. V projektu je vytvořen iterátor, který se váže na daný objekt <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> a umožňuje nastavení své pozice na začátek nebo za konec prvků mapy. Umožňuje též procházení prvků po jednom dopředu - prochází se prvky <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> a to tak, že se postupně prochází jednotlivé lineární seznamy pole <a class="el" href="class_c_hash_map.html#a1018fdaad71e8207e747db26e88025d6">iBucketTable</a> mapy. Při nalezení posledního prvku v daném lineárního seznamu se začne procházet další položka (další lineární seznam) z pole <a class="el" href="class_c_hash_map.html#a1018fdaad71e8207e747db26e88025d6">iBucketTable</a>. Aktuální prvek, na který iterátor ukazuje je možné získat a pracovat s ním pomocí předdefinovaného <a class="el" href="class_c_hash_map_1_1_c_forward_iterator.html#a7f44403bd74fc55f0263b56cf15fc64b">operátoru *</a> a <a class="el" href="class_c_hash_map_1_1_c_forward_iterator.html#a65fde4bd503e69c29b15688cd8c21eaf">operatoru -&gt;</a>. Instance iterátoru vždy ověřuje, zda pomocí indexace přistupujeme k existujícímu prvku mapy a v případě neplatného indexu generuje výjimku <code>std::out_of_range</code>. Dále je třeba vzít v úvahu skutečnost, že iterátor je asociován se zvolenou mapou pouze jednosměrně, tj. pokud z mapy odebereme prvek, iterátor nemá možnost se aktualizovat. Mapa neobsahuje seznam iterátorů, které vytvořila a nemůže tedy provést automatickou aktualizaci (změnu hodnoty) všech vytvořených iterátorů.</p>
<h3>Struktura <a class="el" href="struct_c_hash_map_1_1_t_item.html" title="TItem structure definiton. ">CHashMap::TItem</a></h3>
<p>Pomocná struktura, která slouží jako prvek lineárního seznamu. Obsahuje datový prvek třídy <a class="el" href="class_c_pair.html" title="CPair class (key and value) ">CPair</a> se jménem <a class="el" href="struct_c_hash_map_1_1_t_item.html#a9b832f579f07c1011ef58d89a589470a">iPair</a> a ukazatel na další prvek seznamu <a class="el" href="struct_c_hash_map_1_1_t_item.html#a7d4fed6cab5e5e567fddc934a8ace1f7">iNext</a>. Je-li posledním prvkem, obsahuje ukazatel hodnotu <code>nullptr</code>. Vytvořený lineární seznam je v HashMap uchováván pomocí odkazu v poli pomocných struktur <a class="el" href="struct_c_hash_map_1_1_t_bucket.html">TBucket</a>.</p>
<h3>Struktura <a class="el" href="struct_c_hash_map_1_1_t_bucket.html" title="TBucket structure definition. ">CHashMap::TBucket</a></h3>
<p>Pomocná struktura, která ve třídě <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> slouží k uchování odkazů na jednotlivé lineární seznamy. Každý prvek třídy <a class="el" href="struct_c_hash_map_1_1_t_bucket.html">TBucket</a> uchovává odkaz na první <a class="el" href="struct_c_hash_map_1_1_t_bucket.html#a03a10c5ce912fd09137778c3454e7d77">iHead</a> a poslední <a class="el" href="struct_c_hash_map_1_1_t_bucket.html#a1b8b634924907ed251a58eee989d577a">iTail</a> prvek téhož seznamu. Neobsahuje-li žádný člen, jsou obě složky třídy nastaveny na <code>nullptr</code>.</p>
<h3>Třída <a class="el" href="class_c_pair.html" title="CPair class (key and value) ">CPair</a></h3>
<p>Představuje kontejnerovou datovou strukturu, kterou využívá struktura <a class="el" href="struct_c_hash_map_1_1_t_item.html">TItem</a> pro uchování dat. Vlastní data se skládají z dvojice klíče <a class="el" href="class_c_pair.html#a37d0dd4585094709d0536f47453a2a38">iKey</a> a hodnoty <a class="el" href="class_c_pair.html#a469ab54768d718dd0072d8878fd44611">iValue</a>.</p>
<h3>Třída CValue</h3>
<p>Třída <a class="el" href="class_c_value__bool_1_1_c_value.html">CValue</a> obsahuje prvek (nebo prvky) mající hodnotu vkládanou do kontejneru. Úlohou třídy <a class="el" href="class_c_value__bool_1_1_c_value.html">CValue</a> je zapouzdřit vlastní hodnotu - datovou složku <a class="el" href="class_c_value__bool_1_1_c_value.html#a2a05b9efee1e0497a631a39b0146b776">iValue</a>, která představuje užitečná/pracovní data, která bude každý prvek seznamu obsahovat. Pro tuto třídu je třeba vhodně upravit (případně doplnit) metody určené pro konstrukci a likvidaci prvku tak, aby bylo možné nový prvek efektivně konstruovat a využívat. Třída <a class="el" href="class_c_value__bool_1_1_c_value.html">CValue</a> je navíc správcem své vlastní hodnoty <a class="el" href="class_c_value__bool_1_1_c_value.html#a2a05b9efee1e0497a631a39b0146b776">iValue</a> a proto definuje základní metody pro zjištění, nastavení této hodnoty a zároveň zajišťuje pro nadřazené vyšší části programu metody pro porovnání dvou prvků <a class="el" href="class_c_value__bool_1_1_c_value.html">CValue</a> dle této hodnoty, čímž izoluje nadřazené části od nutnosti znát konkrétní datový typ složky <a class="el" href="class_c_value__bool_1_1_c_value.html#a2a05b9efee1e0497a631a39b0146b776">iValue</a>. Využití této třídy v rámci <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> i výsledného kontejneru musí být ovšem takové, aby <a class="el" href="class_c_hash_map.html" title="CHashMap class definition. ">CHashMap</a> i výsledný kontejner pracovali s jakoukoli třídou <a class="el" href="class_c_value__bool_1_1_c_value.html">CValue</a> jednotně, bez úprav kódu mapy nebo kontejneru.</p>
<h3>Třída ClassInfo</h3>
<p>Třída ClassInfo implementuje mechanismus automatického počítání vzniklých objektů a mechanismus jednoznačné identifikace ClassInfo&lt;&gt;::ID "ID" instancí za běhu programu. Tento mechanismus se Vám bude hodit při ladění programu. Všechny Vaše třídy by měly obsahovat datovou složku <code>iInstanceInfo</code> třídy ClassInfo, čímž zajistíte Vašim třídám tyto ladicí vlastnosti. Samotná třída ClassInfo je definována jako šablona umožňující, vznik různých variant této třídy - (generické programování resp. metaprogramování).</p>
<p>Mezi ladicí metody třídy ClassInfo patří: </p><ul>
<li>ClassInfo&lt;T&gt;::Total() - počítadlo vzniklých instancí třídy T </li>
<li>ClassInfo&lt;T&gt;::Living() - počítadlo v daném okamžiku existujících instancí třídy T </li>
<li>ClassInfo&lt;T&gt;::ID() resp. <a class="el" href="class_c_value__bool_1_1_c_value.html#a028335ed71781b92b96dfb51e1118eda">CValue::ID()</a> - unikátní číselné označení dané instance</li>
</ul>
<dl class="section attention"><dt>Attention</dt><dd>Projděte si všechny uvedené kontrolní i ladicí mechanismy, snažte se pochopit jejich smysl a využití při trasování programu. Získané vědomosti se Vám budou rozhodně hodit, například když se nějaká část Vašeho programu začne chovat "nepřátelsky".</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Hodně štěstí při realizaci Vašeho projektu. Nebojte se, ono to půjde. Hlavně <em>nepropadejte panice!</em> ;-)</dd></dl>
<p>Richter &amp; Petyovský.</p>
<dl class="section rcs"><dt>Id</dt><dd><a class="el" href="_documentation_8md.html">Documentation.md</a> 2 2017-11-06 10:01:25Z petyovsky </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 5 2017 17:30:13 for BPPC 2017: CHashMap Example project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
